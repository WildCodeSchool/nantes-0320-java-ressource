<!DOCTYPE html>
<html lang=en xmlns:th="https://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <title>Admin</title>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">

    <th:block th:include="fragments/head.html :: head"></th:block>
    <link rel="stylesheet" th:href="@{/css/admin_admin.css}" type="text/css">
</head>

<body>
<header th:replace="fragments/admin_header.html :: admin-header"></header>
<main class="admin-admin">
    <h2>Admin Management</h2>
    <button class="admin-btn-new waves-effect waves-light btn-large modal-trigger" data-target="modal1" href="#modal1">
        <i class="material-icons left">add</i>Add New Admin
    </button>

    <div class="modal" id="modal1">
        <div class="modal-content">
            <div class="col s12">
                <h4>ADD NEW ADMIN</h4>
            </div>
            <form action="/admin/admin/create" class="col s12" id="createForm" method="post" th:object="${admin}">
                <input th:name="${_csrf.parameterName}" th:value="${_csrf.token}" type="hidden"/>
                <div class="row">
                    <div class="input-field col s6">
                        <input class="validate" id="user_name" name="username" th:field="*{username}" type="text">
                        <label for="user_name">Username</label>
                        <span class="helper-text" data-error="Missing username"></span>
                    </div>
                    <div class="input-field col s6">
                        <select class="validate" id="roles" name="role">
                            <option disabled selected value="select">Choose your option</option>
                            <option th:each="role : ${roles}" th:text="${role.role}" th:value="${role.id}">ALL</option>
                        </select>
                        <span class="helper-text" id="select-error"></span>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s6">
                        <input class="validate" id="email" name="email" th:field="*{email}" type="email">
                        <label for="email">Email</label>
                        <span class="helper-text" data-error="Missing email"></span>
                    </div>
                    <div class="input-field col s6">
                        <input class="validate" id="password" name="password" th:field="*{password}" type="password">
                        <label for="password">Password</label>
                        <span class="helper-text" data-error="Missing password"></span>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s6">
                        <input id="passwordConfirm" name="passwordConfirm"
                               type="password">
                        <label for="passwordConfirm">Confirm Password</label>
                        <span class="helper-text" data-error="Missing password confirmation"></span>
                    </div>
                    <button class="btn-create col s2 offset-s10 waves-effect waves-green btn" id="create">Create
                    </button>

                </div>
            </form>
        </div>
    </div>

    <table class="striped admin-table-management">
        <thead>
        <th>Email</th>
        <th>Role</th>
        <th>Action</th>
        </thead>
        <tbody>
        <tr th:each="admin : ${admins}">
            <td th:text="${admin.email}">alvin@gmail.com</td>
            <td th:text="${admin.role.role}">ALL</td>
            <td class="icons-admin">
                <button class="btn-icon modal-trigger" data-target="modal2"><i class="material-icons">delete</i></button>
                <div class="modal" id="modal2">
                    <div class="modal-content">
                        <p>Are you sure you want to delete?</p>
                        <p th:text="${admin.username}"></p>
                    </div>
                    <div class="modal-footer logout-footer">
                        <form action="/admin/admin/delete" method="post">
                            <input th:name="${_csrf.parameterName}" th:value="${_csrf.token}" type="hidden"/>
                            <input type="hidden" name="idAdmin" th:value="${admin.id}">
                            <input class="modal-close btn" type="submit" th:value="delete" name="submit">
                        </form>
                        <input class="modal-close btn" type="submit" th:value="cancel" name="submit">
                    </div>
                </div>
                <button class="btn-icon modal-trigger" data-target="modal1"><i class="material-icons">edit</i></button>
            </td>
        </tr>
        </tbody>
    </table>
</main>
<!--JavaScript at end of body for optimized loading-->
<script crossorigin="anonymous"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        src="https://code.jquery.com/jquery-3.4.1.slim.min.js">
</script>
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script src="/js/admin_admin.js" type="text/JavaScript"></script>
</body>

</html>